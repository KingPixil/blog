<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Kabir Shah">

		<title>Inside Wade | Blog of Kabir Shah</title>

		<link id="favicon" rel="shortcut icon"/>
		<link rel="alternate" type="application/json" title="Kabir Shah" href="/feed.json"/>

		<link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet"/>
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"/>
		<link rel="stylesheet" type="text/css" href="/css/lib/grain.min.css"/>
		<link rel="stylesheet" type="text/css" href="/css/styles.css"/>

		<script>
			(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");

			ga("create", "UA-70792533-7", "auto");
			ga("send", "pageview");
		</script>
	</head>

	<body>
		<div class="s-x-33 p-x-10 p-y-10 g-y-6">
			<div class="s-x-i">
				<a class="s-x-i plain" href="/">
					<img src="/img/logo.png" alt="Personal Logo" class="s-y-8"/>
				</a>
				<h1 class="s-x-i">Inside Wade</h1>
				<p class="s-x-i">July 16, 2017</p>
			</div>

			<p class="s-x-i"><a href="https://github.com/kbrsh/wade">Wade</a> is a 1kb Javascript search library. It allows you to search for a query through a set of documents. This query is processed, split into keywords, and then searched within an index structure.</p><h2 id="api" class="s-x-i">API</h2><p class="s-x-i">The API is extremely minimal and self-explanatory. It looks like:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token function">Wade</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token string">"Moon is fast!"</span><span class="token punctuation">,</span> <span class="token string">"Also Slash!"</span><span class="token punctuation">,</span> <span class="token string">"Spark too!"</span><span class="token punctuation">,</span> <span class="token string">"Is Wade fast?"</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">search</span><span class="token punctuation">(</span><span class="token string">"Moon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="processor" class="s-x-i">Processor</h2><p class="s-x-i">Wade processes all documents and queries. This works by moving each item through a separate processing function. These do the following operations:</p><ul>
<li><p class="s-x-i">Make everything lowercase.
This helps with searching. All queries and data are made lowercase, resulting in the search being case-insensitive.</p></li><li><p class="s-x-i">Remove punctuation.
Punctuation is usually irrelevant to the search query and does not need to be searched for.</p></li><li><p class="s-x-i">Remove stop words.
Wade has a list of stop words that are removed from all data and queries. Stop words are extra words that have little meaning or can apply to any item in the data, and removing them allows for more relevant results to be returned. These can be configured through <code class="s-b-2 p-x-2 p-y-2">Wade.config.stopWords</code>.</p></li></ul>
<p class="s-x-i">For example, when given the data:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">[</span><span class="token string">"Moon is fast!"</span><span class="token punctuation">,</span> <span class="token string">"Slash is fast also!"</span><span class="token punctuation">,</span> <span class="token string">"Spark is fast too!"</span><span class="token punctuation">,</span> <span class="token string">"Is Wade fast?"</span><span class="token punctuation">]</span></code></pre><p class="s-x-i">It is processed into:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">[</span><span class="token string">"moon fast"</span><span class="token punctuation">,</span> <span class="token string">"slash fast"</span><span class="token punctuation">,</span> <span class="token string">"spark fast"</span><span class="token punctuation">,</span> <span class="token string">"wade fast"</span><span class="token punctuation">]</span></code></pre><p class="s-x-i">Notice how everything is lowercase, does not contain punctuation, and does not contain stop words.</p><h2 id="index" class="s-x-i">Index</h2><p class="s-x-i">After processing the data, an index can be generated to allow for optimized searches within a text. This index can be generated by:</p><ol>
<li><p class="s-x-i">Processing each document.</p></li><li><p class="s-x-i">Splitting each document into a multiset of terms.</p></li><li><p class="s-x-i">Generating a trie of the terms and storing the indexes of the corresponding documents containing the term.</p></li><li><p class="s-x-i">Storing the weighted significance of the term in the documents.</p></li></ol>
<p class="s-x-i">A <em>set</em> is used to store multiple unique items. The <em>cardinality</em> of a set represents the amount of elements in the set.</p><p class="s-x-i">On the other hand, a <em>multiset</em> is used to store multiple items (including duplicates). The <em>multiplicity</em> of an item in a multiset is the number of instances of that item in the multiset.</p><p class="s-x-i">Wade uses a special function to find how significant a term is to the data. This function takes various factors into account, including the length of the documents, the length of a specific document with the term, and the number of occurrences of the term.</p><p class="s-x-i">The significance of the term <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> in the set of documents <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> can be represented by the function:</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>m</mi><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1.5</mn><mo>−</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi mathvariant="normal">∣</mi><mi>d</mi><mi mathvariant="normal">∣</mi></mrow></munderover><mo stretchy="false">[</mo><mfrac><mrow><mi>μ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><mrow><munder><mo>∑</mo><mrow><mi>p</mi><mo>∈</mo><msub><mi>d</mi><mi>i</mi></msub></mrow></munder><mo stretchy="false">(</mo><mi>μ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">]</mo></mrow><mrow><mi mathvariant="normal">∣</mi><mi>d</mi><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">wm(t, d) = 1.5 - \frac{\sum_{i=0}^{|d|} [\frac{\mu(t)}{\sum_{p \in d_i}(\mu(p))}]}{|d|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.081267em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.145267em;"><span style="top:-2.3419em;"><span class="pstrut" style="height:3.0279em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mord">∣</span></span></span><span style="top:-3.2579em;"><span class="pstrut" style="height:3.0279em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.145267em;"><span class="pstrut" style="height:3.0279em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0278999999999998em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="mord mathdefault mtight">d</span><span class="mord mtight">∣</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1745899999999999em;"><span style="top:-2.1785614285714288em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mathdefault mtight">i</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.31472em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5462385714285715em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">μ</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">p</span><span class="mclose mtight">)</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">t</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.727367em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><ol>
<li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> is a set of multisets <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></li><li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∃</mi><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>∨</mo><mi mathvariant="normal">∄</mi><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo>∈</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\exists d_i(t \in d_i) \lor \nexists d_i(t \in d_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∃</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">∄</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p></li><li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mu(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">μ</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span> is the multiplicity of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> in the multiset <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></li><li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mrow><mi>p</mi><mo>∈</mo><msub><mi>d</mi><mi>i</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>μ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{p \in d_i}(\mu(p))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.185818em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.18639799999999984em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">μ</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span> is the cardinality of the multiset <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></li><li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>μ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><mrow><msub><mo>∑</mo><mrow><mi>p</mi><mo>∈</mo><msub><mi>d</mi><mi>i</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>μ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\mu(t)}{\sum_{p \in d_i}(\mu(p))}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.7373669999999999em;vertical-align:-0.727367em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1745899999999999em;"><span style="top:-2.1785614285714288em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mathdefault mtight">i</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.31472em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5462385714285715em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">μ</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">p</span><span class="mclose mtight">)</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">t</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.727367em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> is the ratio of occurrences of the term <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> in the document <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to the total amount of terms in the document <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p></li></ol>
<p class="s-x-i">This works by finding the average of how often the term appears within a document. After this, the significance is normalized between <code class="s-b-2 p-x-2 p-y-2">0.5</code> and <code class="s-b-2 p-x-2 p-y-2">1.5</code>, allowing it to become higher when the average occurrence is lower. This allows for rarer terms to be amplified in significance.</p><p class="s-x-i">For example, when given the processed data:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">[</span><span class="token string">"moon fast"</span><span class="token punctuation">,</span> <span class="token string">"slash fast"</span><span class="token punctuation">,</span> <span class="token string">"spark fast"</span><span class="token punctuation">,</span> <span class="token string">"wade fast"</span><span class="token punctuation">]</span></code></pre><p class="s-x-i">An index is generated:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">{</span>
  <span class="token string">"m"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"o"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"o"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"n"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token number">1.375</span><span class="token punctuation">,</span>
            <span class="token number">0</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"f"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"s"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"t"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token number">3</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"s"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"l"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"s"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"h"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
              <span class="token number">1.375</span><span class="token punctuation">,</span>
              <span class="token number">1</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"p"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"r"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"k"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
              <span class="token number">1.375</span><span class="token punctuation">,</span>
              <span class="token number">2</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"w"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"d"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"e"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token number">1.375</span><span class="token punctuation">,</span>
            <span class="token number">3</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p class="s-x-i">This is a map of every single character so that they can be searched through individually. At the end of a specific term, there is a <code class="s-b-2 p-x-2 p-y-2">data</code> property. The first item in this array is the significance of the term. The other items are the indexes of the documents in which the term appears.</p><p class="s-x-i">Notice how the unique terms <code class="s-b-2 p-x-2 p-y-2">&quot;moon&quot;</code>, <code class="s-b-2 p-x-2 p-y-2">&quot;slash&quot;</code>, <code class="s-b-2 p-x-2 p-y-2">&quot;spark&quot;</code>, and <code class="s-b-2 p-x-2 p-y-2">&quot;wade&quot;</code> all have a higher weight of <code class="s-b-2 p-x-2 p-y-2">1.375</code>. In contrast, the term <code class="s-b-2 p-x-2 p-y-2">&quot;fast&quot;</code> appears in all of the documents half of the time, and has a lower weight of <code class="s-b-2 p-x-2 p-y-2">1</code>.</p><h2 id="search" class="s-x-i">Search</h2><p class="s-x-i">Searching works by:</p><ol>
<li><p class="s-x-i">Processing the query.</p></li><li><p class="s-x-i">Splitting the query into a multiset of terms.</p></li><li><p class="s-x-i">Searching the index for each term.</p></li></ol>
<p class="s-x-i">To correctly increment the score, the relevance must be taken into account. The relevance of the term <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> in the query <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span> to the set of documents <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> can be represented by the function:</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>r</mi><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mi>w</mi><mi>m</mi><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo stretchy="false">[</mo><mfrac><mn>1</mn><mrow><munder><mo>∑</mo><mrow><mi>p</mi><mo>∈</mo><mtext> </mtext><mi>q</mi></mrow></munder><mo stretchy="false">(</mo><mi>μ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">wr(t, q, d) = wm(t, d)[\frac{1}{\sum_{p \in\ q}(\mu(p))}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.443258em;vertical-align:-1.1218180000000002em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.07765999999999995em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">∈</span><span class="mspace mtight"><span class="mtight"> </span></span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">μ</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1218180000000002em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span></span></span><ol>
<li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span> is a multiset</p></li><li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mu(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">μ</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mclose">)</span></span></span></span> is the multiplicity of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span> in the multiset <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span></p></li><li><p class="s-x-i"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mrow><mi>p</mi><mo>∈</mo><mtext> </mtext><mi>q</mi></mrow></msub><mo stretchy="false">(</mo><mi>μ</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{p \in\ q}(\mu(p))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.185818em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.07765999999999995em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">p</span><span class="mrel mtight">∈</span><span class="mspace mtight"><span class="mtight"> </span></span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">μ</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span> is the cardinality of the multiset <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span></p></li></ol>
<p class="s-x-i">This can be used to represent how much each term should affect the score of the query. It works by taking <a href="#significance">significance</a> of the term and the length of the query into account.</p><p class="s-x-i">For example, let&#39;s say you are searching in real-time and have a partial query:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code>Fast S</code></pre><p class="s-x-i">This is processed and split into terms:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">[</span><span class="token string">"fast"</span><span class="token punctuation">,</span> <span class="token string">"s"</span><span class="token punctuation">]</span></code></pre><p class="s-x-i">All terms except for the last term are searched for exact matches. This means that Wade will only increment the score for documents that have the term in them.</p><p class="s-x-i">First, the term <code class="s-b-2 p-x-2 p-y-2">&quot;fast&quot;</code> is searched for in the index. The process looks like:</p><ol>
<li><p class="s-x-i">Check if the letter <code class="s-b-2 p-x-2 p-y-2">&quot;f&quot;</code> is in the index. Set it to the current node and continue.</p></li><li><p class="s-x-i">Set the current node to the <code class="s-b-2 p-x-2 p-y-2">&quot;a&quot;</code> node.</p></li><li><p class="s-x-i">Set the current node to the <code class="s-b-2 p-x-2 p-y-2">&quot;s&quot;</code> node.</p></li><li><p class="s-x-i">Set the current node to the <code class="s-b-2 p-x-2 p-y-2">&quot;t&quot;</code> node.</p></li></ol>
<p class="s-x-i">At this point, the current node is:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token string">"t"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">3</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p class="s-x-i">It has a <code class="s-b-2 p-x-2 p-y-2">data</code> property, meaning that this term was present in at least one document. We store the significance (<code class="s-b-2 p-x-2 p-y-2">1</code>), and increment the score for the indexes.</p><p class="s-x-i">In this case, the indexes are <code class="s-b-2 p-x-2 p-y-2">[0, 1, 2, 3]</code>. The current relevance can be evaluated using the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">wr</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> function by setting <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> to <code class="s-b-2 p-x-2 p-y-2">&quot;fast&quot;</code>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span> to the query, and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> to the documents.</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>r</mi><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo>=</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">wr(t, q, d) = 1(\frac{1}{2}) = 0.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span></span></span></span></span><p class="s-x-i">As a result, we update the score for all documents containing the term <code class="s-b-2 p-x-2 p-y-2">&quot;fast&quot;</code> by <code class="s-b-2 p-x-2 p-y-2">0.5</code>. So far, the results are:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">0.5</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">0.5</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">0.5</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">0.5</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre><p class="s-x-i">Next, we have the term <code class="s-b-2 p-x-2 p-y-2">&quot;s&quot;</code>. This term is treated as a prefix, and every single document containing a term with the prefix <code class="s-b-2 p-x-2 p-y-2">&quot;s&quot;</code> will have their score updated.</p><p class="s-x-i">After checking if <code class="s-b-2 p-x-2 p-y-2">&quot;s&quot;</code> is in the index, we find the node:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token string">"s"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"l"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"s"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"h"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token number">1.375</span><span class="token punctuation">,</span>
            <span class="token number">1</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"p"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"r"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"k"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token number">1.375</span><span class="token punctuation">,</span>
            <span class="token number">2</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p class="s-x-i">After looking through each individual node, we find <code class="s-b-2 p-x-2 p-y-2">data</code> properties after <code class="s-b-2 p-x-2 p-y-2">&quot;slash&quot;</code> and <code class="s-b-2 p-x-2 p-y-2">&quot;spark&quot;</code>:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token comment">// "slash"</span>
<span class="token string">"h"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token number">1.375</span><span class="token punctuation">,</span>
    <span class="token number">1</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// "spark"</span>
<span class="token string">"k"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token number">1.375</span><span class="token punctuation">,</span>
    <span class="token number">2</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p class="s-x-i">The relevance for the terms <code class="s-b-2 p-x-2 p-y-2">&quot;slash&quot;</code> and <code class="s-b-2 p-x-2 p-y-2">&quot;spark&quot;</code> can be calculated:</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>r</mi><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1.375</mn><mo stretchy="false">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo>=</mo><mn>0.6875</mn></mrow><annotation encoding="application/x-tex">wr(t, q, d) = 1.375(\frac{1}{2}) = 0.6875</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">3</span><span class="mord">7</span><span class="mord">5</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">6</span><span class="mord">8</span><span class="mord">7</span><span class="mord">5</span></span></span></span></span><p class="s-x-i">With this value, we can update the score for the documents containing the terms <code class="s-b-2 p-x-2 p-y-2">&quot;slash&quot;</code> and <code class="s-b-2 p-x-2 p-y-2">&quot;spark&quot;</code> by <code class="s-b-2 p-x-2 p-y-2">0.6875</code>.</p><p class="s-x-i">After updating the results using the indexes, the final results are:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code><span class="token punctuation">[</span>
  <span class="token comment">// Moon is fast!</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">0.5</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// Slash is fast also!</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">1.1875</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// Spark is fast too!</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">1.1875</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// Is Wade fast?</span>
  <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    score<span class="token punctuation">:</span> <span class="token number">0.5</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre><p class="s-x-i">The most relevant results were:</p><pre class="s-x-i s-b-2 p-x-4 p-y-4"><code>"Slash is fast also!"
"Spark is fast too!"</code></pre><p class="s-x-i">They both have a term with the prefix <code class="s-b-2 p-x-2 p-y-2">&quot;s&quot;</code>, and the term <code class="s-b-2 p-x-2 p-y-2">&quot;fast&quot;</code>. The rest of the results were given a lower score of <code class="s-b-2 p-x-2 p-y-2">0.5</code> because they only had the term <code class="s-b-2 p-x-2 p-y-2">&quot;fast&quot;</code> in them.</p><h2 id="conclusion" class="s-x-i">Conclusion</h2><p class="s-x-i">In a nutshell, Wade processes data, splits it into terms, and creates an index containing the indexes of the items along with how relevant each term is to the data. A query is also processed and split into terms. These terms are individually searched within the index and the scores are updated as needed.</p><p class="s-x-i">Wade&#39;s source is available on <a href="https://github.com/kbrsh/wade">GitHub</a>.</p>

			<div class="s-x-i g-x-5">
				<p><a href="https://kabir.sh">Portfolio</a></p>
				<p><a href="https://blog.kabir.sh">Blog</a></p>
				<p><a href="https://twitter.com/kbrshah">Twitter</a></p>
				<p><a href="https://github.com/kbrsh">GitHub</a></p>
			</div>
		</div>

		<script type="text/javascript" src="/js/index.js"></script>
	</body>
</html>
